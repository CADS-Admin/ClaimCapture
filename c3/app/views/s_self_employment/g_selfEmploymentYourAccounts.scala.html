@(currentForm: Form[models.domain.SelfEmploymentYourAccounts])(implicit claim: models.domain.Claim, lang: Lang, request: Request[AnyContent], flash:Flash, messages: play.api.i18n.Messages)

@import helper._
@import utils.helpers.CarersTemplate._
@import views.html.helper._
@import views.html.helper.base._
@import utils.helpers.CarersCrypto
@import views.html.helper.dates._
@import utils.csrf.DwpCSRFFormHelper
@import utils.helpers.PastPresentLabelHelper.labelForSelfEmployment
@import scala.language.postfixOps

@main(messages("s8.g2") + " " + messages("s8.longName"), messages("s8.longName"), Some(currentForm), ignorePreview = true) {

    @form(action = controllers.s_self_employment.routes.GSelfEmploymentYourAccounts.submit, 'role -> "form") {

    @DwpCSRFFormHelper.formField

        <fieldset class="form-elements">

            <ul>

                @yesNoRadioGroup(currentForm("doYouKnowYourTradingYear"), 'track -> true)

                @otherDetailPlaceHolder(
                    inputDef = Seq(
                        tradingStartDate(currentForm("whatWasOrIsYourTradingYearFrom"), '_label -> labelForSelfEmployment(claim, lang, "whatWasOrIsYourTradingYearFrom")),
                        tradingEndDate(currentForm("whatWasOrIsYourTradingYearTo"), '_label -> labelForSelfEmployment(claim, lang, "whatWasOrIsYourTradingYearTo")),
                        yesNoRadioGroup(currentForm("areIncomeOutgoingsProfitSimilarToTrading"), 'values -> Seq("yes" -> messages("label.yes1"), "no" -> messages("label.no"))),
                        otherDetailPlaceHolder(
                            inputDef = Seq(carersInputTextArea(currentForm("tellUsWhyAndWhenTheChangeHappened"),
                                'ignoreOptional -> true,
                                'textAreaHelper -> Html(messages("300charsLeft")),
                                'maxLength -> 300)
                            ),
                            'id -> "selfEmployedIncomeWrap"
                        )
                    ),
                    'id -> "doYouKnowYourTradingYearIncomeWrap"
                )

            </ul>
            
        </fieldset>

        @views.html.common.bottomNavigation(nextLabel = Some("form.next"))

    }

    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/s_self_employment/g_selfEmploymentYourAccounts.js")></script>
    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/textAreaCounter.js")></script>

    <script type="text/javascript">
        $(function () {
            window.areaCounter({selector: "@CarersCrypto.encryptAES("tellUsWhyAndWhenTheChangeHappened")",maxChars:300});
            window.initEvents({
                doYouKnowYourTradingYearY:"@CarersCrypto.encryptAES("doYouKnowYourTradingYear_yes")",
                doYouKnowYourTradingYearN:"@CarersCrypto.encryptAES("doYouKnowYourTradingYear_no")",
                similarY:"@CarersCrypto.encryptAES("areIncomeOutgoingsProfitSimilarToTrading_yes")",
                similarN:"@CarersCrypto.encryptAES("areIncomeOutgoingsProfitSimilarToTrading_no")",
                change:"@CarersCrypto.encryptAES("tellUsWhyAndWhenTheChangeHappened")",
                toDay:"@CarersCrypto.encryptAES("whatWasOrIsYourTradingYearTo_day")",
                toMonth:"@CarersCrypto.encryptAES("whatWasOrIsYourTradingYearTo_month")",
                toYear:"@CarersCrypto.encryptAES("whatWasOrIsYourTradingYearTo_year")",
                fromDay:"@CarersCrypto.encryptAES("whatWasOrIsYourTradingYearFrom_day")",
                fromMonth:"@CarersCrypto.encryptAES("whatWasOrIsYourTradingYearFrom_month")",
                fromYear:"@CarersCrypto.encryptAES("whatWasOrIsYourTradingYearFrom_year")"
            });
        });
    </script>

}

