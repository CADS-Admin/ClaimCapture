@(currentForm: Form[models.domain.SelfEmploymentYourAccounts])(lang: Lang)(implicit claim: models.domain.Claim,request: Request[AnyContent])

@import helper._
@import utils.helpers.CarersTemplate._
@import views.html.helper._
@import views.html.helper.base._
@import utils.helpers.CarersCrypto
@import views.html.helper.dates._
@import utils.csrf.DwpCSRFFormHelper
@import utils.helpers.PastPresentLabelHelper.labelForSelfEmployment
@import scala.language.postfixOps


@import play.api.i18n.{MMessages => Messages}
@defining(lang) { implicit language =>
@main(Messages("s8.g2") + " " + Messages("s8.longName"), Messages("s8.longName"), Some(currentForm), ignorePreview = true) {

    @form(action = controllers.s_self_employment.routes.GSelfEmploymentYourAccounts.submit, 'role -> "form") {

    @DwpCSRFFormHelper.formField

        <fieldset class="form-elements">

            <ul>

                @yesNoRadioGroup(currentForm("doYouKnowYourTradingYear"), 'track -> true)

                @otherDetailPlaceHolder(
                    inputDef = Seq(
                        tradingStartDate(currentForm("whatWasOrIsYourTradingYearFrom"), '_label -> labelForSelfEmployment(claim, lang, "whatWasOrIsYourTradingYearFrom")),
                        tradingEndDate(currentForm("whatWasOrIsYourTradingYearTo"), '_label -> labelForSelfEmployment(claim, lang, "whatWasOrIsYourTradingYearTo")),
                        yesNoRadioGroup(currentForm("areIncomeOutgoingsProfitSimilarToTrading"), 'values -> Seq("yes" -> Messages("label.yes1"), "no" -> Messages("label.no"))),
                        otherDetailPlaceHolder(
                            inputDef = Seq(carersInputTextArea(currentForm("tellUsWhyAndWhenTheChangeHappened"),
                                'ignoreOptional -> true,
                                'textAreaHelper -> Html(Messages("300charsLeft")),
                                'maxLength -> 300)
                            ),
                            'id -> "selfEmployedIncomeWrap"
                        )
                    ),
                    'id -> "doYouKnowYourTradingYearIncomeWrap"
                )

            </ul>
            
        </fieldset>

        @views.html.common.bottomNavigation(previous = Some(claim.navigation.previousIgnorePreview),nextLabel = Some("form.next"))

    }

    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/s_self_employment/g_selfEmploymentYourAccounts.js")></script>
    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/textAreaCounter.js")></script>

    <script type="text/javascript">
        $(function () {
            @ga.stagePrompt()
            window.initEvents({
                doYouKnowYourTradingYearY:"@CarersCrypto.encryptAES("doYouKnowYourTradingYear_yes")",
                doYouKnowYourTradingYearN:"@CarersCrypto.encryptAES("doYouKnowYourTradingYear_no")",
                areIncomeOutgoingsProfitSimilarToTradingY:"@CarersCrypto.encryptAES("areIncomeOutgoingsProfitSimilarToTrading_yes")",
                areIncomeOutgoingsProfitSimilarToTradingN:"@CarersCrypto.encryptAES("areIncomeOutgoingsProfitSimilarToTrading_no")",
                tellUsWhyAndWhenTheChangeHappened:"@CarersCrypto.encryptAES("tellUsWhyAndWhenTheChangeHappened")"
            });
        });
        window.areaCounter({selector: "@CarersCrypto.encryptAES("tellUsWhyAndWhenTheChangeHappened")",maxChars:300});
    </script>

}
}