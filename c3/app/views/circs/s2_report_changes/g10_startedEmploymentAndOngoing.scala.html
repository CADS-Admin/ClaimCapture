@(startedEmploymentAndOngoing: Form[models.domain.CircumstancesStartedEmploymentAndOngoing])(implicit claim: models.domain.Claim, lang: Lang, request: Request[AnyContent])

@import helper._
@import utils.helpers.CarersTemplate._
@import views.html.common._
@import views.html.helper._
@import views.html.helper.dropdowns._
@import views.html.helper.base._
@import views.html.helper.dates._
@import controllers.Mappings._
@import utils.helpers.CarersCrypto
@import play.api.i18n.{MMessages => Messages}

@beenPaidYet = @{startedEmploymentAndOngoing("beenPaidYet")}
@howOften = @{startedEmploymentAndOngoing("howOften")}
@howOftenFrequency = @{startedEmploymentAndOngoing("howOften")("frequency")}
@usuallyPaidSameAmount = @{startedEmploymentAndOngoing("usuallyPaidSameAmount")}
@doYouPayIntoPension = @{startedEmploymentAndOngoing("doYouPayIntoPension")}
@doCareCostsForThisWork = @{startedEmploymentAndOngoing("doCareCostsForThisWork")}
@whatDatePaid = @{startedEmploymentAndOngoing("whatDatePaid")}
@howMuchPaid = @{startedEmploymentAndOngoing("howMuchPaid")}
@monthlyPayDay = @{startedEmploymentAndOngoing("monthlyPayDay")}
@moreAboutChanges = @{startedEmploymentAndOngoing("moreAboutChanges")}

@main(Messages("c2.g10") + " - " + Messages("c2.name")) {
    @errorsSummary(startedEmploymentAndOngoing)

    @form(action = controllers.circs.s2_report_changes.routes.G10StartedEmploymentAndOngoing.submit) {
        <div class="form-wrap">
	        <fieldset class="form-elements">
	            <legend>@Html(Messages("c2.g10"))</legend>
	
	            <ul>
                    @yesNoRadioGroup(beenPaidYet)

                    @otherDetailPlaceHolder(
                        inputDef = Seq(
                            carersShortInputText(howMuchPaid,
                                '_label -> {if(beenPaidYet.value == "yes") "howMuchPaid" else "howMuchPaid.expect"}
                            ),
                            dateTimePickerWithDynamicLabel(whatDatePaid,
                                '_label -> {if(beenPaidYet.value == "yes") "whatDatePaid" else "whatDatePaid.expect"},
                                'dynamicDateDays-> 31),
                            paymentFrequencySelect(howOften,
                                'id -> "howOften",
                                'visibleOn -> "yes",
                                '_label -> {if(beenPaidYet.value == "yes") "circs.howOften" else "circs.howOften.expect"},
                                'textAreaHelper -> Html(Messages("60charsLeft")), 'maxLength -> 60,
                                'display -> {if(howOftenFrequency.value.getOrElse("no") == "other") "yes" else "no"}
                            )
                        ),
                        'id -> "beenPaidYetWrap",
                        'display -> {if(beenPaidYet.value != None) "yes" else "no"}
                    )

                    @otherDetailPlaceHolder(
                        inputDef = Seq(
                            carersInputText(monthlyPayDay,
                                'ignoreOptional -> true,
                                'helperAbove -> Html(Messages("monthlyPayDay.help")))
                            ),
                        'id -> "monthlyPayDayWrap",
                        'display -> {if(howOftenFrequency.value.getOrElse("no") == "monthly") "yes" else "no"}
                    )

                    @otherDetailPlaceHolder(
                        inputDef = Seq(
                            yesNoRadioGroup(usuallyPaidSameAmount,
                                '_label -> {if(beenPaidYet.value == "yes")
                                                howOftenFrequency.value.getOrElse("noset") match {
                                                    case "weekly" => "usuallyPaidSameAmount.week"
                                                    case "fortnightly" => "usuallyPaidSameAmount.fortnight"
                                                    case "fourweekly" => "usuallyPaidSameAmount.fourweekly"
                                                    case "monthly" => "usuallyPaidSameAmount.month"
                                                    case _ => "usuallyPaidSameAmount.other"
                                                }
                                            else
                                                howOftenFrequency.value.getOrElse("noset") match {
                                                    case "weekly" => "usuallyPaidSameAmount.week.expect"
                                                    case "fortnightly" => "usuallyPaidSameAmount.fortnight.expect"
                                                    case "fourweekly" => "usuallyPaidSameAmount.fourweekly.expect"
                                                    case "monthly" => "usuallyPaidSameAmount.month.expect"
                                                    case _ => "usuallyPaidSameAmount.other.expect"
                                            }
                                })
                            ),
                        'id -> "usuallyPaidSameAmountWrap",
                        'display -> {if((howOftenFrequency.value != None) &&
                                        (howOftenFrequency.value.getOrElse("no") != Html(Messages("pleaseSelect"))) &&
                                        (howOftenFrequency.value.getOrElse("no") != "")) "yes" else "no"}
                    )
                </ul>
            </fieldset>
            <fieldset class="form-elements">
                <legend>@Html(Messages("c2.g9.pensionsAndExpenses"))</legend>

                <ul>
                    @yesNoRadioGroup(doYouPayIntoPension("answer"),
                        '_label -> "doYouPayIntoPension"
                    )

                    @otherDetailPlaceHolder(
                        inputDef = Seq(
                            carersInputTextArea(doYouPayIntoPension("whatFor"),
                                'helper -> Html(Messages("300charsLeft")),
                                'helperAbove -> Html(Messages("doYouPayIntoPension.whatFor.help")),
                                'ignoreOptional -> true,
                                'maxLength -> 300)
                        ),
                        'id -> "whatForWrap",
                        'display -> {if(doYouPayIntoPension("answer").value.getOrElse("no") == "yes") "yes" else "no"}
                    )

                    @yesNoRadioGroup(doCareCostsForThisWork("answer"),
                        '_label -> "doCareCostsForThisWork",
                        'values -> Seq("yes" -> Messages("label.yes4"), "no" -> Messages("label.no"))
                    )

                    @otherDetailPlaceHolder(
                        inputDef = Seq(
                            carersInputTextArea(doCareCostsForThisWork("whatCosts"),
                                'helper -> Html(Messages("300charsLeft")),
                                'helperAbove -> Html(Messages("doCareCostsForThisWork.whatCosts.help")),
                                'ignoreOptional -> true,
                                'maxLength -> 300)
                        ),
                        'id -> "whatCostsWrap",
                        'display -> {if(doCareCostsForThisWork("answer").value.getOrElse("no") == "yes") "yes" else "no"}
                    )

                    @carersInputTextArea(moreAboutChanges, 'helperAbove-> Messages("moreAboutChanges.helper"), 'helper -> Html(Messages("300charsLeft")), 'maxLength -> 300)
                </ul>
	        </fieldset>
	
	        <nav class="form-steps">
	            <ul>
	            	<li><button type="submit" name="action" value="next" class="button">@Html(Messages("form.next"))</button></li>
	            	<li><a id="backButton" href="@claim.navigation.previous">@Html(Messages("form.back"))</a></li>
	            </ul>
	        </nav>
        </div>
    }
}

<script type="text/javascript" src='@routes.Assets.at("javascripts/circs/s2_report_changes/g10_startedEmploymentAndOngoing.js")'></script>
<script type="text/javascript" src='@routes.Assets.at("javascripts/textAreaCounter.js")'></script>
<script type="text/javascript" src='@routes.Assets.at("javascripts/selectOther.js")'></script>

<script type="text/javascript">
$(function(){
    window.areaCounter({selector:"@CarersCrypto.encryptAES(howOftenFrequency.id)",maxChars:60});
})
$(function(){
    window.fixErrorMessages("@CarersCrypto.encryptAES(beenPaidYet("yes").id)",
                            "@CarersCrypto.encryptAES(beenPaidYet("no").id)",
                            "@CarersCrypto.encryptAES(howMuchPaid.id)",
                            "@Html(Messages("howMuchPaid"))",
                            "@Html(Messages("howMuchPaid.expect"))",
                            "@CarersCrypto.encryptAES(whatDatePaid.id)",
                            "@Html(Messages("whatDatePaid"))",
                            "@Html(Messages("whatDatePaid.expect"))",
                            "@CarersCrypto.encryptAES(howOften.id)",
                            "@CarersCrypto.encryptAES(howOftenFrequency.id)",
                            "@Html(Messages("howOften"))",
                            "@Html(Messages("circs.howOften"))",
                            "@Html(Messages("circs.howOften.expect"))",
                            "@CarersCrypto.encryptAES(usuallyPaidSameAmount.id)",
                            "@Html(Messages("usuallyPaidSameAmount"))",
                            "@Html(Messages("usuallyPaidSameAmount.week"))",
                            "@Html(Messages("usuallyPaidSameAmount.week.expect"))",
                            "@Html(Messages("usuallyPaidSameAmount.fortnight"))",
                            "@Html(Messages("usuallyPaidSameAmount.fortnight.expect"))",
                            "@Html(Messages("usuallyPaidSameAmount.fourweekly"))",
                            "@Html(Messages("usuallyPaidSameAmount.fourweekly.expect"))",
                            "@Html(Messages("usuallyPaidSameAmount.month"))",
                            "@Html(Messages("usuallyPaidSameAmount.month.expect"))",
                            "@Html(Messages("usuallyPaidSameAmount.other"))",
                            "@Html(Messages("usuallyPaidSameAmount.other.expect"))",
                            "@CarersCrypto.encryptAES(doYouPayIntoPension("answer").id)"
    );

    window.beenPaidYet("@CarersCrypto.encryptAES(beenPaidYet("yes").id)",
                       "@CarersCrypto.encryptAES(beenPaidYet("no").id)",
                       "@CarersCrypto.encryptAES(howMuchPaid.id)",
                       "@Html(Messages("howMuchPaid"))",
                       "@Html(Messages("howMuchPaid.expect"))",
                       "@CarersCrypto.encryptAES(whatDatePaid.id)",
                       "@CarersCrypto.encryptAES(whatDatePaid("day").id)",
                       "@CarersCrypto.encryptAES(whatDatePaid("month").id)",
                       "@CarersCrypto.encryptAES(whatDatePaid("year").id)",
                       "@Html(Messages("whatDatePaid"))",
                       "@Html(Messages("whatDatePaid.expect"))",
                       "@CarersCrypto.encryptAES(howOftenFrequency.id)",
                       "@CarersCrypto.encryptAES(howOftenFrequency("other").id)",
                       "@Html(Messages("circs.howOften"))",
                       "@Html(Messages("circs.howOften.expect"))",
                       "@CarersCrypto.encryptAES(monthlyPayDay.id)",
                       "@Html(Messages("monthlyPayDay"))",
                       "@Html(Messages("monthlyPayDay.expect"))",
                       "@CarersCrypto.encryptAES(usuallyPaidSameAmount.id)",
                       "@CarersCrypto.encryptAES(usuallyPaidSameAmount("yes").id)",
                       "@CarersCrypto.encryptAES(usuallyPaidSameAmount("no").id)",
                       "@Html(Messages("usuallyPaidSameAmount.week"))",
                       "@Html(Messages("usuallyPaidSameAmount.week.expect"))",
                       "@Html(Messages("usuallyPaidSameAmount.fortnight"))",
                       "@Html(Messages("usuallyPaidSameAmount.fortnight.expect"))",
                       "@Html(Messages("usuallyPaidSameAmount.fourweekly"))",
                       "@Html(Messages("usuallyPaidSameAmount.fourweekly.expect"))",
                       "@Html(Messages("usuallyPaidSameAmount.month"))",
                       "@Html(Messages("usuallyPaidSameAmount.month.expect"))",
                       "@Html(Messages("usuallyPaidSameAmount.other"))",
                       "@Html(Messages("usuallyPaidSameAmount.other.expect"))");

    window.payDay("@CarersCrypto.encryptAES(beenPaidYet("yes").id)",
                  "@CarersCrypto.encryptAES(beenPaidYet("no").id)",
                  "@CarersCrypto.encryptAES(howOftenFrequency.id)",
                  "@CarersCrypto.encryptAES(monthlyPayDay.id)",
                  "@CarersCrypto.encryptAES(usuallyPaidSameAmount.id)",
                  "@CarersCrypto.encryptAES(usuallyPaidSameAmount("yes").id)",
                  "@CarersCrypto.encryptAES(usuallyPaidSameAmount("no").id)",
                  "@Html(Messages("pleaseSelect"))",
                  "@Html(Messages("usuallyPaidSameAmount.week"))",
                  "@Html(Messages("usuallyPaidSameAmount.week.expect"))",
                  "@Html(Messages("usuallyPaidSameAmount.fortnight"))",
                  "@Html(Messages("usuallyPaidSameAmount.fortnight.expect"))",
                  "@Html(Messages("usuallyPaidSameAmount.fourweekly"))",
                  "@Html(Messages("usuallyPaidSameAmount.fourweekly.expect"))",
                  "@Html(Messages("usuallyPaidSameAmount.month"))",
                  "@Html(Messages("usuallyPaidSameAmount.month.expect"))",
                  "@Html(Messages("usuallyPaidSameAmount.other"))",
                  "@Html(Messages("usuallyPaidSameAmount.other.expect"))");

    window.whatFor("@CarersCrypto.encryptAES(doYouPayIntoPension("answer")("yes").id)",
                   "@CarersCrypto.encryptAES(doYouPayIntoPension("answer")("no").id)",
                   "@CarersCrypto.encryptAES(doYouPayIntoPension("whatFor").id)");

    window.whatCosts("@CarersCrypto.encryptAES(doCareCostsForThisWork("answer")("yes").id)",
                     "@CarersCrypto.encryptAES(doCareCostsForThisWork("answer")("no").id)",
                     "@CarersCrypto.encryptAES(doCareCostsForThisWork("whatCosts").id)");
    window.areaCounter({selector: "@CarersCrypto.encryptAES(howOftenFrequency("other").id)",maxChars:60});
    window.areaCounter({selector: "@CarersCrypto.encryptAES(doYouPayIntoPension("whatFor").id)",maxChars:300});
    window.areaCounter({selector: "@CarersCrypto.encryptAES(doCareCostsForThisWork("whatCosts").id)",maxChars:300});
    window.areaCounter({selector: "@CarersCrypto.encryptAES(moreAboutChanges.id)",maxChars:300});
});
</script>