@(reportAChangeForm: Form[models.domain.CircumstancesReportChange])(lang: Lang)(implicit claim: models.domain.Claim, request: Request[AnyContent])

@import play.api.Play
@import play.api.Play.current
@import play.api.i18n.{MMessages => Messages}
@import utils.csrf.DwpCSRFFormHelper
@import utils.helpers.CarersTemplate._
@import views.html.helper._
@import views.html.helper.base._
@import views.html.helper.dates._
@import app.ConfigProperties._
@import utils.helpers.CarersCrypto

@defining(lang) { implicit language =>
    @main(Messages("c1") + " - " + Messages("c2.longName"), Some(reportAChangeForm), back = true) {

        @form(action = controllers.circs.s1_start_of_process.routes.G2ReportAChangeInYourCircumstances.submit) {
            @DwpCSRFFormHelper.formField

            <div class="form-wrap">

                <fieldset class="form-elements" data-journey="carers-allowance:report-change:identification">

                    <legend class="form-label-bold heading-medium">@Html(Messages("c1.yourDetails"))</legend>

                    <p>@Html(Messages("c1.helper"))</p>

                    <ul>
                        @carersInputText(reportAChangeForm("fullName"), 'maxLength -> 35)

                        @nationalInsuranceNumber(reportAChangeForm("nationalInsuranceNumber"), 'helperAbove -> Messages("mandatory.nationalInsuranceNumber.helper"), 'helperBelow -> Messages("mandatory.nationalInsuranceNumber.helper2"))

                        @dateOfBirth(reportAChangeForm("dateOfBirth"))
                    </ul>

                </fieldset>

                <fieldset class="form-elements">

                    <legend class="form-label-bold heading-medium">@Html(Messages("c1.personYouAreCaringFor"))</legend>

                    <ul>
                        @carersInputText(reportAChangeForm("theirFullName"), 'maxLength -> 35)

                        @carersInputText(reportAChangeForm("theirRelationshipToYou"), 'helperAbove -> Messages("theirRelationshipToYou.helper"), 'maxLength -> 35)
                    </ul>

                </fieldset>

                <fieldset class="form-elements">

                    <legend class="form-label-bold heading-medium">@Html(Messages("c3.g2"))</legend>

                    <ul>
                        @carersInputText(
                            reportAChangeForm("furtherInfoContact"),
                            'maxLength -> 35,
                            'helperAbove -> Messages("furtherInfoContact.helper")
                        )

                        @if(getProperty("email.frontend",false)) {
                            @yesNoRadioGroup(reportAChangeForm("wantsEmailContactCircs"))

                            @otherDetailPlaceHolder(
                                inputDef = Seq(
                                    carersInputText(reportAChangeForm("mail"), 'ignoreOptional -> true, 'maxLength -> 254),
                                    carersInputText(reportAChangeForm("mailConfirmation"), 'ignoreOptional -> true, 'maxLength -> 254)
                                ),
                                'id -> "emailWrap"
                            )
                        }
                    </ul>

                </fieldset>


                <nav class="form-steps">
                    <ul>
                        <li><button type="submit" name="action" value="next" class="button">@Html(Messages("form.next"))</button></li>
                        <li><a id="backButtonBottom" href="@{claim.navigation.previous}?changing=true">@Html(Messages("form.back"))</a></li>
                    </ul>
                </nav>

            </div>

        }
    }

    @if(getProperty("email.frontend",false)) {
        <script type="text/javascript" src='@routes.Assets.at("javascripts/email.js")'></script>
        <script type="text/javascript">
        $(function() {
            window.emailInit("@CarersCrypto.encryptAES("wantsEmailContactCircs_yes")",
                             "@CarersCrypto.encryptAES("wantsEmailContactCircs_no")",
                             "@CarersCrypto.encryptAES("mail")",
                             "@CarersCrypto.encryptAES("mailConfirmation")");
        });
    </script>
    }

}