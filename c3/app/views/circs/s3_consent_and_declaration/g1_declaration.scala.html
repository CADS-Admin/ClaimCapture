@(declarationForm: Form[models.domain.CircumstancesDeclaration])(lang: Lang)(implicit claim: models.domain.Claim,request: Request[AnyContent])

@import utils.helpers.CarersTemplate._
@import utils.csrf.DwpCSRFFormHelper
@import views.html.helper._
@import views.html.helper.base._
@import models.domain._
@import utils.helpers.CarersCrypto
@import play.api.i18n.{MMessages => Messages}
@import app.ConfigProperties._

@defining(lang) { implicit language =>
@main(Messages("c3.g1") + " - " + Messages("c3.name")) {
    @errorsSummary(declarationForm)

    @form(action = controllers.circs.s3_consent_and_declaration.routes.G1Declaration.submit) {

        <input type="hidden" id="js" name="jsEnabled" value="false">

        @DwpCSRFFormHelper.formField

        <div class="form-wrap">

	        <fieldset class="form-elements">

	            <legend class="form-label-bold heading-medium">@Html(Messages("c3.g2"))</legend>
	
	            <ul>
	                @carersInputText(
	                    declarationForm("furtherInfoContact"),
	                  'maxLength -> 35,
	                  'helperAbove -> Messages("furtherInfoContact.helper")
	                )

                    @if(getProperty("email.frontend",false)) {
                        @yesNoRadioGroup(declarationForm("wantsEmailContactCircs"))

                        @otherDetailPlaceHolder(
                            inputDef = Seq(
                                carersInputText(declarationForm("mail"), 'ignoreOptional -> true, 'maxLength -> 254),
                                carersInputText(declarationForm("mailConfirmation"), 'ignoreOptional -> true, 'maxLength -> 254)
                            ),
                            'id -> "emailWrap"
                        )
                    }
	            </ul>
	            
	        </fieldset>
	
	       <fieldset class="form-elements">

	            <legend class="form-label-bold heading-medium">@Html(Messages("c3.g1"))</legend>

                <p>@Messages("circs.declaration.openingParagraph")</p>
                <ul class="list-bullet">
                    <li>@Messages("circs.declaration.1")</li>
                    <li>@Messages("circs.declaration.2a") <a rel="external" target="_blank" href="https://www.gov.uk/carers-allowance-report-change">@Messages("circs.declaration.2b")</a> @Messages("circs.declaration.2c") <a rel="external" target="_blank" href="https://www.gov.uk/carers-allowance-unit">@Messages("circs.declaration.2d")</a></li>
                    <li>@Messages("circs.declaration.3a") <a rel="external" id="claimnotes" target="_blank" href="/internal-claim-notes/@lang.code">@Messages("circs.declaration.3b")</a> @Messages("circs.declaration.3c")</li>
                </ul>
                <p class="warning-text">
                    @Messages("circs.declaration.warning")
                </p>
	
                <div class="block-checkbox">
	               @declareCheckPlaceholder(declarationForm("circsSomeOneElse"))
                </div>
	
	            <ul class="third-party-decleration">
	                @otherDetailPlaceHolder(
	                    inputDef = Seq(
	                        carersInputText(declarationForm("nameOrOrganisation"), 'maxLength -> mappings.Mappings.sixty)),
	                    'id -> "nameOrOrganisationWrapper"
	                )
	            </ul>
	
	            <ul class="circs-group">
	                @yesNoRadioGroup(declarationForm("obtainInfoAgreement"))
	                @otherDetailPlaceHolder(
	                    inputDef = Seq(
	                        carersInputTextArea(declarationForm("obtainInfoWhy"), 'maxLength -> 300, 'textAreaHelper -> Html(Messages("300charsLeft")))),
	                    'id -> "why"
                    )
	            </ul>
                
	        </fieldset>
	
	        <nav class="form-steps">
	            <ul>
	            	<li><button type="submit" name="action" value="next" class="button">@Html(Messages("s3.g1.submit"))</button></li>
                    <li><a id="backButtonBottom" href="@claim.navigation.previous">@Html(Messages("form.back"))</a></li>
	            </ul>
	        </nav>

        </div>

    }
}

<script type="text/javascript">$($("#js").val("true"));</script>
<script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/circs/s3_consent_and_declaration/g1_declaration.js")></script>
<script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/textAreaCounter.js")></script>

<script type="text/javascript">
    $(function() {
        window.initEvents("@CarersCrypto.encryptAES("obtainInfoAgreement_yes")",
                           "@CarersCrypto.encryptAES("obtainInfoAgreement_no")",
                           "@CarersCrypto.encryptAES("obtainInfoWhy")",
                           "@CarersCrypto.encryptAES("circsSomeOneElse")",
                           "@CarersCrypto.encryptAES("nameOrOrganisation")");

        window.areaCounter ( { selector : "@CarersCrypto.encryptAES("obtainInfoWhy")",maxChars:300});

    });
</script>

@if(getProperty("email.frontend",false)) {
    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/email.js")></script>
    <script type="text/javascript">
        $(function() {
            window.emailInit("@CarersCrypto.encryptAES("wantsEmailContactCircs_yes")",
                             "@CarersCrypto.encryptAES("wantsEmailContactCircs_no")",
                             "@CarersCrypto.encryptAES("mail")",
                             "@CarersCrypto.encryptAES("mailConfirmation")");
        });
    </script>
}

}