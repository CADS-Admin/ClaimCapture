@()(implicit claim: models.domain.Claim, request: Request[AnyContent], lang: Lang)
@import models.domain.YourPartnerPersonalDetails
@import play.api.i18n.{MMessages => Messages}
@import helper._

@yourPartner = @{claim.questionGroup[YourPartnerPersonalDetails].getOrElse(YourPartnerPersonalDetails())}
@middleName = @{yourPartner.middleName.map(_+" ").getOrElse("")}
@titleValue = @{
	yourPartner.title match {
		case Some("Other") => yourPartner.titleOther.getOrElse("")
		case _ => Messages("titleSelect." + yourPartner.title.getOrElse("").toLowerCase)
	}
}
@titleNames = @{
    s"${titleValue} ${yourPartner.firstName.get} ${middleName}${yourPartner.surname.get}"
}
@disableChangeButton = @{
	!app.ConfigProperties.getProperty("cyaToggleVisible",true)
}
@content = {
	@fieldWithLink("partner_hadPartner", "hadPartnerSinceClaimDate", Messages("label."+yourPartner.hadPartnerSinceClaimDate),disableLink = disableChangeButton, elementId = Some("hadPartnerSinceClaimDate"))
	@if(yourPartner.hadPartnerSinceClaimDate.toLowerCase == "yes"){
		@fieldWithLink("partner_name", "name", titleNames ,disableLink = disableChangeButton, elementId = Some("firstName"))
		@fieldWithLink("partner_dateOfBirth", "dateOfBirth", yourPartner.dateOfBirth.getOrElse(DayMonthYear(None,None,None)).`dd month, yyyy`,disableLink = disableChangeButton, elementId = Some("dateOfBirth"))
        @{/** Nationality question anchors to dateOfBirth because javascript causes conflict with page height **/}
        @fieldWithLink("partner_nationality", "partner.nationality", yourPartner.nationality.get,disableLink = disableChangeButton, elementId = Some("dateOfBirth"))
		@fieldWithLink("partner_seperated", "separated.fromPartner", Messages("label."+yourPartner.separatedFromPartner.get.toLowerCase),disableLink = disableChangeButton, elementId = Some("separated_fromPartner"))
		@fieldWithLink("partner_isPersonCareFor", "isPartnerPersonYouCareFor", Messages("label."+yourPartner.isPartnerPersonYouCareFor.get.toLowerCase),disableLink = disableChangeButton, elementId = Some("isPartnerPersonYouCareFor"))
	}
}

@accordion(label = Messages("s3.longName"), openLabel = "open-partner", closeLabel = "close-partner", content = content, 'track -> true)
