@()(implicit claim: models.domain.Claim, request: Request[AnyContent], lang: Lang)

@import models.domain._
@import play.api.i18n.{MMessages => Messages}
@import app.MaritalStatus._

@yourDetails = @{claim.questionGroup[YourDetails].getOrElse(YourDetails())}
    @nino = @{
        val ni = yourDetails.nationalInsuranceNumber
        if (ni.ni1.isDefined) s"${ni.ni1.get.toUpperCase} ${ni.ni2.get} ${ni.ni3.get} ${ni.ni4.get} ${ni.ni5.get.toUpperCase}"
        else ""
    }
@contactDetails = @{claim.questionGroup[ContactDetails].getOrElse(ContactDetails())}
@address = @{contactDetails.address}
@claimDate = @{claim.questionGroup[ClaimDate].getOrElse(ClaimDate())}
@nationalityAndResidency = @{
    claim.questionGroup[NationalityAndResidency].getOrElse(NationalityAndResidency(""))
}
@nationality = @{
    nationalityAndResidency.actualnationality match {
        case Some(n) => n
        case _ => nationalityAndResidency.nationality
    }
}
@otherEEA = @{claim.questionGroup[OtherEEAStateOrSwitzerland].getOrElse(OtherEEAStateOrSwitzerland())}
@trips = @{claim.questionGroup[Trips].getOrElse(Trips())}
@maritalStatus = @{
nationalityAndResidency.maritalStatus match {
        case Some(Married) => Messages("maritalStatus.married")
        case Some(Single) => Messages("maritalStatus.single")
        case Some(Divorced) => Messages("maritalStatus.divorced")
        case Some(Widowed) => Messages("maritalStatus.widowed")
        case Some(Separated) => Messages("maritalStatus.separated")
        case Some(Partner) => Messages("maritalStatus.livingWithPartner")
        case _ => ""
    }
}

<h2>@Html(Messages("aboutYou.title"))</h2>
<dl>
    <dt>@Html(Messages("name"))</dt><dd>@Html(Messages("titleSelect."+yourDetails.title.toLowerCase)) @yourDetails.firstName @yourDetails.middleName @yourDetails.surname</dd>
    <dt>@Html(Messages("nationalInsuranceNumber"))</dt><dd>@nino</dd>
    <dt>@Html(Messages("dateOfBirth"))</dt><dd>@{yourDetails.dateOfBirth.`dd month, yyyy`}</dd>
    <dt>@Html(Messages("address"))</dt><dd>@address.lineOne@{address.lineTwo.fold("")(", "+_)}@{address.lineThree.fold("")(", "+_)} @contactDetails.postcode.getOrElse("")</dd>
    <dt>@Html(Messages("howWeContactYou"))</dt><dd>@contactDetails.howWeContactYou</dd>
    @if(!nationalityAndResidency.maritalStatus.isEmpty){
        <dt>@Html(Messages("maritalStatusNQ"))</dt><dd>@{maritalStatus}</dd>
    }
    <dt>@Html(Messages("dateOfClaim.simple"))</dt><dd>@{claimDate.dateOfClaim.`dd month, yyyy`}</dd>
    <dt>@Html(Messages("yourNationality"))</dt><dd>@{nationality}</dd>
    <dt>@Html(Messages("timeOutsideGB"))</dt><dd>@{Messages("label."+(if (trips.fiftyTwoWeeksTrips.size > 0) "yes" else "no"))}</dd>
    <dt>@Html(Messages("benefitsFromEEA"))</dt><dd>@{Messages("label."+otherEEA.benefitsFromEEA)}</dd>
    <dt>@Html(Messages("workingForEEA"))</dt><dd>@{Messages("label."+otherEEA.workingForEEA)}</dd>
</dl>