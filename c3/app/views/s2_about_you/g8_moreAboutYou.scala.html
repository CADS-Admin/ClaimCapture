@(moreAboutYouForm: Form[models.domain.MoreAboutYou])(implicit claim: models.domain.Claim,request: Request[AnyContent], lang: Lang)

@import common._
@import helper._
@import views.html.common._
@import models.domain.Claim
@import models.domain.ClaimDate
@import utils.helpers.CarersTemplate._
@import views.html.helper.dropdowns._
@import utils.helpers._
@import play.api.i18n.{MMessages => Messages}

@notSingleNorLivingWithPartner = @{
    val v = moreAboutYouForm("maritalStatus").value.getOrElse("")
    v != "p" && v != ""
}

@pensionHelpWithLink = @{
    Html(Messages("receiveStatePension.help")) + """ <a href="/claim-help#4"""" + views.html.ga.trackClickEvent(linkName = "Claim Notes - State Pension") + """>""" + Html(Messages("receiveStatePension.help.link")) + """</a>"""
}

@main(Messages("s2.g8") + " - " + Messages("s2.longName"), claim.completedQuestionGroups(models.domain.MoreAboutYou)) {
    @errorsSummary(moreAboutYouForm)


    @form(action = controllers.s2_about_you.routes.G8MoreAboutYou.submit) {

	        <fieldset class="form-elements">

                @maritalStatusSelect(moreAboutYouForm("maritalStatus"))

                @ulDetailPlaceHolder(
                    inputDef = Seq(yesNoRadioGroup(moreAboutYouForm("hadPartnerSinceClaimDate"), '_label -> Messages("hadPartnerSinceClaimDate.label", claim.dateOfClaim.fold("")(_.`dd/MM/yyyy`)), 'helperAbove -> Messages(if (moreAboutYouForm("maritalStatus").value.getOrElse("") != "w") "hadPartnerSinceClaimDate.helper1" else "hadPartnerSinceClaimDate.helper2"))),
                    'id -> "hadPartnerWrapper"
                )

            </fieldset>

            <fieldset class="form-elements">
                <legend>@Html(Messages("s2.g8"))</legend>
                <ul>
	                @yesNoRadioGroup(moreAboutYouForm("beenInEducationSinceClaimDate"), '_label -> Messages("beenInEducationSinceClaimDate.label", claim.dateOfClaim.fold("")(_.`dd/MM/yyyy`)))
	
	                @yesNoRadioGroup(moreAboutYouForm("receiveStatePension"), '_label -> Messages("receiveStatePension"), 'helperAbove -> pensionHelpWithLink)
	            </ul>
            </fieldset>
	
	        <nav class="form-steps">
	            <ul>
	            	<li><button type="submit" name="action" value="next" class="button" @views.html.ga.trackSubmit()>@Html(Messages("form.next"))</button></li>
	            	<li><a id="backButton" href="@claim.navigation.previous">@Html(Messages("form.back"))</a></li>
	            </ul>
	        </nav>

    }
}

<script type="text/javascript" src='@routes.Assets.at("javascripts/s2_about_you/g8_moreAboutYou.js")'></script>

<script type="text/javascript">
    $(function(){
        window.initEvents("@CarersCrypto.encryptAES("maritalStatus")",
                          "@CarersCrypto.encryptAES("hadPartnerSinceClaimDate_yes")",
                          "@CarersCrypto.encryptAES("hadPartnerSinceClaimDate_no")",
                          "@CarersCrypto.encryptAES("hadPartnerSinceClaimDate")",
                          "@Html(Messages("hadPartnerSinceClaimDate.helper1"))",
                          "@Html(Messages("hadPartnerSinceClaimDate.helper2"))");
    });
</script>
