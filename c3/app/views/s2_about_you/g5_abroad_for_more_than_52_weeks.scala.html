@(AbroadForMoreThan52WeeksForm: Form[models.domain.AbroadForMoreThan52Weeks], trips: models.domain.Trips)(implicit claim: models.domain.Claim,request: Request[AnyContent])
@import scala.xml.NodeSeq

@import scala.language.postfixOps
@import views.html.helper._
@import models.domain.Trips
@import models.DayMonthYear
@import utils.helpers.CarersCrypto
@import views.html.s2_about_you.main

@main(Messages("s2.g5") + " - " + Messages("s2.longName"), claim.completedQuestionGroups(models.domain.AbroadForMoreThan52Weeks), Some(AbroadForMoreThan52WeeksForm)) {
@errorsSummary(AbroadForMoreThan52WeeksForm)

    <fieldset id="trips" class="form-elements results-detail">
        <legend>@Messages("52Weeks.summaryTable.label")</legend>

        <table>
            <caption>@Messages("52Weeks.summaryTable.label")</caption>

            <thead>
                <tr>
                    <th>Dates</th>
                    <th class="desc">@Messages("where")</th>
                    <th class="desc">@Messages("why")</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
            @for((trip,currentIteration) <- trips.fiftyTwoWeeksTrips.zipWithIndex) {
                <tr id="@trip.id" class="@trip.id">
                    <td>
                        @{trip.start match {
                            case Some(dayMonthYear) => dayMonthYear.`dd/MM/yyyy`
                            case _ =>
                        }}
                        @{if (trip.end.nonEmpty) <span>to</span>}
                        @{trip.end match {
                            case Some(dayMonthYear) => dayMonthYear.`dd/MM/yyyy`
                            case _ =>
                        }}
                    </td>

                    <td class="desc">@trip.where</td>
                    <td class="desc">
                        @{trip.why match {
                            case Some(reasonForBeingThere) => reasonForBeingThere.reason match {
                                    case Some (reason) =>
                                        if (reasonForBeingThere.other.isDefined)"Other: " +reasonForBeingThere.other.get else reason
                                    case _ =>
                                }
                            case _ =>
                        }}
                    </td>
                    <td><input id="iteration-@{currentIteration + 1}-change" type="button" class="button row secondary" value="Change" aria-label="Change button"></td>
                    <td><input id="iteration-@{currentIteration + 1}-delete" type="button" class="button row warning" value="Delete" aria-label="Delete button"></td>
                </tr>
            }
            </tbody>
        </table>
        
        <div class="prompt table-helper">
        	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        

        <div class="prompt breaks-prompt">
            <p>Are you sure you want to delete this trip?</p>
            <input id="selected-row-do-not-delete" type="button" class="button row secondary" value="No" aria-label="No Delete">
            <input id="selected-row-delete" type="button" class="button row warning" value="Yes" aria-label="Yes Delete">
            <span>&#33;</span>
        </div>
    </fieldset>



    @form(action = controllers.s2_about_you.routes.G5AbroadForMoreThan52Weeks.submit) {
        <fieldset class="form-elements">
            <legend>@Messages("s2.g5")</legend>

            <ul class="group">
            @defining(if(trips.fiftyTwoWeeksTrips == Nil || trips.fiftyTwoWeeksTrips.isEmpty) {"52Weeks.label"} else {"52Weeks.more.label"}) { label =>
                @yesNoRadioGroup(AbroadForMoreThan52WeeksForm(
                    "anyTrips"),
                    '_label -> Messages(label, claim.dateOfClaim.fold("{NO CLAIM DATE}")(dmy => (dmy - 156 weeks).`dd/MM/yyyy`)),
                    'helperBelow -> Messages("52Weeks.helper")
                )
            }
            </ul>

            <div id="warningMessageWrap" class="prompt breaks-prompt breaks-error-prompt" style="display: none;">
                <p>We will contact you about more trips.</p>
                <span>!</span>
            </div>

        </fieldset>

        <nav class="form-steps">
            <a id="backButton" href="@claim.navigation.previous" class="button secondary">Back</a>
            <button type="submit" name="action" value="next" class="button">Next</button>
        </nav>
    }
}

<script type="text/javascript" src='@routes.Assets.at("javascripts/s2_about_you/trips.js")'></script>
<script type="text/javascript">
$(function () {
window.initEvents("@CarersCrypto.encryptAES("anyTrips_yes")", "@CarersCrypto.encryptAES("anyTrips_no")");
});
</script>