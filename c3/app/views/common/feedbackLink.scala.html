@(isFooterItem:Boolean=true, isThankYou:Boolean=false)(implicit request: Request[AnyContent], lang: Lang, messages: play.api.i18n.Messages)

@import app.ConfigProperties._

@isCadsFeedbackEnabled = @{
    getProperty("feedback.cads.enabled", default = false)
}
@isCircsPage = @{
    request.uri.startsWith("/circumstances") || request.uri.contains("/change-carers")
}
@isInActivePage = @{
    isCadsFeedbackEnabled match {
        case true => request.uri.contains("error") || request.uri.contains("timeout") || request.uri.contains("thankyou")
        case false => false
    }
}
@feedbackUrl = @{
    (isCadsFeedbackEnabled, isCircsPage) match {
        case (true, true) => messages("feedback.circs.link")
        case (true, false) => messages("feedback.link")
        case (false, true) => messages("feedback.old.circs.link")
        case (false, false) => messages("feedback.old.link")
    }
}
@feedbackId = @{
    (isCadsFeedbackEnabled, isFooterItem ) match {
        case (false, _ ) => "claim-feedback"
        case (true, true ) => "footer-feedback"
        case (true,false ) => "feedback"
    }
}
@feedbackLabel = @{
    ( isFooterItem, isThankYou ) match {
        case( true, _ ) => Html(messages("footer.feedback.text"))
        case( false, true ) => Html(messages("claim.feedback.link"))
        case( false, false ) => Html(messages("feedbacklink.claim"))
    }
}

@*
<a id="claim-feedback" @if(feedbackInNewTab){rel="external" target="_blank"} href="@feedbackUrl" @views.html.ga.trackClickEvent(linkName = "Feedback")>@messages("footer.feedback.text")</a>
*@

    @if(!isFooterItem){
        <a href="@feedbackUrl" @if(!isInActivePage){rel="external" target="_blank"} @if(isThankYou){class="secondary"}>@feedbackLabel</a>
    }
    @if(isFooterItem){
        <a id="@feedbackId" href="@feedbackUrl" @if(!isInActivePage){rel="external" target="_blank"}>@feedbackLabel</a>
    }




