@(lang: Lang)(implicit claim: models.domain.Claim, request: Request[AnyContent])

@import app.ConfigProperties._
@import models.domain._
@import play.api.i18n.{MMessages => Messages, _}
@import utils.helpers.HtmlLabelHelper.displayPlaybackDatesFormat
@import play.api.Play
@import play.api.Play.current
@import controllers.mappings.Mappings

@employment = @{
    claim.questionGroup[Employment].getOrElse(Employment())
}
@isEmployment = @{
    employment.beenEmployedSince6MonthsBeforeClaim == "yes"
}
@isSelfEmployment = @{
    employment.beenSelfEmployedSince1WeekBeforeClaim == "yes"
}
@isEmploymentOrSelfEmployment = @{
    isEmployment || isSelfEmployment
}
@claimDate = @{
    claim.questionGroup[ClaimDate].getOrElse(ClaimDate()).dateOfClaim
}
@displayDateForLabel = @{
    displayPlaybackDatesFormat(lang, claimDate)
}

@isEmail = @{
    getProperty("email.frontend",false) && claim.questionGroup[ContactDetails].getOrElse(ContactDetails()).wantsContactEmail.getOrElse("") == Mappings.yes
}

@defining(lang) { implicit language =>
    @common.govMain(Messages("thankyou")) {

        <div class="carers-allowance clearfix" data-journey="carers-allowance:page:thank-you">

            @common.protoType()

            <article class="finish-statement">

                <section class="app-complete">
                    <h1>@Html(Messages("thankyou"))</h1>
                    <p>@Html(Messages("claim.received"))</p>
                    <p class="nino-title">@Html(Messages("claim.recieved2"))</p>
                </section>

                <div class="finish-mobile">@Html(Messages("claim.feedback.link"))</div>

                @if(isEmploymentOrSelfEmployment) {

                    <div class="finish-info">

                        <section>
                            <h1>@Html(Messages("documents.title"))</h1>
                            <h3>@Html(Messages("documents.sendingDocs.title"))</h3>
                            <p>@Html(Messages("documents.sendingDocs.text"))</p>
                        </section>

                        <div class="send-info">

                            @if(isEmployment) {
                                <section>
                                    <h2 id="employment">@Html(Messages("s11.g5.help3"))</h2>
                                    <ul>
                                        <li>@{
                                            Messages("s11.g5.help4")
                                        } @displayDateForLabel</li>
                                        <li>@Html(Messages("s11.g5.help5"))</li>
                                        <li>@Html(Messages("s11.g5.help6"))</li>
                                    </ul>
                                </section>
                            }
                            @if(isSelfEmployment) {
                                <section>
                                    <h2 id="selfEmployment">@Html(Messages("s11.g5.help7"))</h2>
                                    <ul>
                                        <li>@Html(Messages("s11.g5.help8"))</li>
                                        <li>@Html(Messages("s11.g5.help9"))</li>
                                    </ul>
                                </section>
                            }
                            <section class="address">
                                <h2>@Html(Messages("s11.g5.help10"))</h2>
                                <span>@Html(Messages("s11.g5.help11"))</span>
                                <span>@Html(Messages("s11.g5.help12"))</span>
                                <span>@Html(Messages("s11.g5.help13"))</span>
                                <span>@Html(Messages("s11.g5.help14"))</span>
                                <p>@Html(Messages("s11.g5.help15"))</p>
                            </section>

                        </div>

                    </div>
                }

            </article>

            <!-- left-panel -->

            <aside class="left-col right-panel @{
                if(!isEmploymentOrSelfEmployment) "no-employment"
            }">

                <section>
                    <h2>@Html(Messages("next"))</h2>
                    <ul>
                        @if(isEmail){
                            <li>@Html(Messages("email.claim.thankYou"))</li>
                        }
                        <li>@Html(Messages("claim.next.1"))</li>
                        <li>@Html(Messages("claim.next.2"))</li>
                        <li>@Html(Messages("claim.next.3"))</li>
                        <li>@Html(Messages("next.last"))</li>
                    </ul>
                </section>

                <section>
                    <h2>@Html(Messages("change.head"))</h2>
                    <p>@Html(Messages("change.link"))</p>
                </section>

                <div class="finish-button">@Html(Messages("claim.feedback.link"))</div>

            </aside>
                <!-- / right panel -->

            @if(getProperty("display.transid", false)) {
                <input type="hidden" name="transId" id="transId" value="@{
                    claim.transactionId.getOrElse("NO_TRANS_ID")
                }"/>
            }
        </div>
    }
}
<script type="text/javascript">
$ ( function ( ) {
    @if(!Play.isTest) {
        trackEvent ( "times", "claim - end" );
        var eligibility = getCookie('claimeligibility');
        var start = getCookie('claimstart');
        var now = new Date().getTime();
        var durationFromEligibility = now - eligibility;
        var durationFromStart = now - start;
        trackTiming('TimeToCompletion','Claim from eligibility', durationFromEligibility);
        trackTiming('TimeToCompletion','Claim from start', durationFromStart);
    }
    @ga.stagePrompt()
} )
</script>