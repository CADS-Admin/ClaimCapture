@(form: Form[_])(implicit lang: Lang, request: Request[AnyContent])

@import utils.helpers.CarersCrypto
@import play.api.i18n.{MMessages => Messages}
@import utils.helpers.GAHelper._
@import app.ConfigProperties._

    @gaTrack(key: String, errorMessage: String)  = @{
        if(getProperty("include.analytics", default = true) ){
            trackEvent(request.path, "Error", Some(s"$key - $errorMessage"))
        }else{
            ""
        }
    }

    @if(form.hasErrors) {
    <div class="validation-summary">
        <h2 class="heading-small">@Html(Messages("error.title"))</h2>
        <p>@Html(Messages("error.label"))</p>
        <ol class="list-bullet">
            @for(error <- form.errors) {
                <li>
                    <a href="#@CarersCrypto.encryptAES(error.key.replace(".","_"))">
                        @Html(Messages(error.key, error.args: _*)) - <span class="lower-case">@Html(Messages(error.message, error.args: _*))</span>
                    </a>
                </li>
            }
        </ol>
    </div>

<script type="text/javascript">
    $(function() {
            @for(error <- form.errors) {
                @Html(gaTrack(Messages(error.key, error.args: _*), Messages(error.message, error.args: _*)))
            }
    });
</script>

}

