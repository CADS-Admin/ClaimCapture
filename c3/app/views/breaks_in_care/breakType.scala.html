@(currentForm: Form[models.domain.BreaksInCareType])(implicit claim: models.domain.Claim, lang: Lang, request: play.api.mvc.Request[AnyContent],flash:Flash, messages: play.api.i18n.Messages)

@import views.html.helper._
@import utils.csrf.DwpCSRFFormHelper
@import language.postfixOps
@import scala.language.postfixOps
@import views.html.breaks_in_care.main
@import models.domain.TheirPersonalDetails
@import models.domain.Breaks
@import models.domain.ClaimDate

@optionsList(implicit lang:Lang) = @{
    Seq(Breaks.hospital -> messages("breaks.hospital"),
        Breaks.carehome -> messages("breaks.carehome"),
        Breaks.none -> messages("breaks.none")
    )
}
@dateWeRequireBreakInCareInformationFrom() = @{
    val claimDateQG = claim.questionGroup[ClaimDate].getOrElse(ClaimDate())
    claimDateQG.dateWeRequireBreakInCareInformationFrom(lang)
}
@theirPersonalDetails = @{claim.questionGroup[TheirPersonalDetails].getOrElse(TheirPersonalDetails())}
@dpname=@{
    theirPersonalDetails.firstName+" "+theirPersonalDetails.surname
}

@main(messages("breaks.title"), messages("breaks.title"), Some(currentForm)) {
    @form(action = controllers.breaks_in_care.routes.GBreakTypes.submit, 'role -> "form") {
        @DwpCSRFFormHelper.formField
        <input type="hidden" id="js" name="jsEnabled" value="false">
        <fieldset class="form-elements">
            <ul>
                @standaloneListCheckboxGroup(currentForm("breaktype"),
                    currentForm.asInstanceOf[Form[AnyContent]],
                    'items -> optionsList,
                    'helperAbove -> "breaks.breaktype.checkBoxHelp1",
                    'track -> true,
                    'ignoreOptional -> true,
                    '_showId -> true,
                    '_label -> messages("breaktype", dateWeRequireBreakInCareInformationFrom, dpname))

                @yesNoRadioGroup(currentForm("breaktype_other"),
                    '_label -> messages("breaktype_other", dpname),
                    'helperAbove->messages("breaks.breaktype.other.helper"))
            </ul>
        </fieldset>
        @views.html.common.bottomNavigation(trackSubmit = true)
    }
    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/s_breaks/g_oldbreaksInCare.js")></script>
}
