@(currentForm: Form[models.domain.BreaksInCareSummary])(implicit claim: models.domain.Claim, lang: Lang, request: play.api.mvc.Request[AnyContent],flash:Flash, messages: play.api.i18n.Messages)

@import views.html.helper._
@import utils.csrf.DwpCSRFFormHelper
@import language.postfixOps
@import scala.language.postfixOps
@import views.html.breaks_in_care.main
@import models.domain.TheirPersonalDetails
@import models.domain.Breaks
@import models.domain.ClaimDate

@optionsList(implicit lang:Lang) = @{
    Seq(Breaks.hospital -> messages("breaksummary_hospital"),
        Breaks.carehome -> messages("breaksummary_carehome"),
        Breaks.another -> messages("breaksummary_another")
    )
}
@dateWeRequireBreakInCareInformationFrom() = @{
    val claimDateQG = claim.questionGroup[ClaimDate].getOrElse(ClaimDate())
    claimDateQG.dateWeRequireBreakInCareInformationFrom(lang)
}
@theirPersonalDetails = @{claim.questionGroup[TheirPersonalDetails].getOrElse(TheirPersonalDetails())}
@dpname=@{
    theirPersonalDetails.firstName+" "+theirPersonalDetails.surname
}

@main(messages("breaks.title"), messages("breaks.title"), Some(currentForm)) {
    @form(action = controllers.breaks_in_care.routes.GBreaksInCareSummary.submit, 'role -> "form") {
        @DwpCSRFFormHelper.formField
        <input type="hidden" id="js" name="jsEnabled" value="false">
        <fieldset class="form-elements">
            <h2 class="heading-medium" id="heading1">@Html(messages("breaksummary_title"))</h2>
            <table>
                <tr><th>Who</th><th>Where</th></tr>
                <tr><td>You</td><td>Respite or chare home</td></tr>
            </table>
            <br>
            <br>
            <ul>
                @yesNoRadioGroup(currentForm("breaksummary_other"),
                    '_label -> messages("breaksummary_other", dateWeRequireBreakInCareInformationFrom, dpname),
                    'ignoreOptional->true)

                <legend class="form-label-bold">@Html(messages("breaksummary_answer"))</legend>
                @standaloneListRadioGroup(currentForm("breaksummary_answer"),
                    'items -> optionsList,
                    'ignoreOptional -> true,
                    'track -> true
                )
            </ul>
        </fieldset>
        @views.html.common.bottomNavigation(trackSubmit = true)
    }
    <script type="text/javascript" @views.html.common.nonCachingSrc("javascripts/s_breaks/g_oldbreaksInCare.js")></script>
}
